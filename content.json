{"meta":{"title":"SunHao","subtitle":"SunHaoの博客","description":"有道无术，术尚可求；有术无道，止于术","author":"SunHao","url":"https://sunhao-ai.github.io","root":"/"},"pages":[{"title":"关于本站","date":"2020-04-19T04:58:56.000Z","updated":"2021-08-02T02:38:15.539Z","comments":false,"path":"about/index.html","permalink":"https://sunhao-ai.github.io/about/index.html","excerpt":"","text":"仙气の云彩“ 认识自我、超越自我 “ 那么你离成功就又进了一步！ 当你在项目中感觉所要学习的人和事越来越多时，说明你在 成长 。 当你感觉要责怪的人和事越来越少时，说明你在 成熟 。 当你在项目中不断获得了友谊和朋友时，说明你将取得项目的 成功 。 联系我B站：仙气のxianqi（萌新up） QQ：2287853439 （嘀嘀~，麻烦让一下，我要开车了！） 座右铭：既然选择了远方 便只顾风雨兼程"},{"title":"archives","date":"2019-10-24T16:00:00.000Z","updated":"2021-06-27T12:40:24.587Z","comments":true,"path":"archives/index.html","permalink":"https://sunhao-ai.github.io/archives/index.html","excerpt":"","text":""},{"title":"分类","date":"2020-11-24T07:12:19.000Z","updated":"2021-07-26T14:44:28.785Z","comments":false,"path":"categories/index.html","permalink":"https://sunhao-ai.github.io/categories/index.html","excerpt":"","text":""},{"title":"留言板","date":"2020-10-31T02:11:28.000Z","updated":"2021-08-14T07:44:13.518Z","comments":false,"path":"comments/index.html","permalink":"https://sunhao-ai.github.io/comments/index.html","excerpt":"","text":"new Artitalk({ appId: 'o2lydQokojD1IP8EGhex24WU-MdYXbMMI', appKey: '8ykSyPm9CwzCDdR5dbid1AWT' })"},{"title":"我的歌单","date":"2019-05-17T08:14:00.000Z","updated":"2021-07-26T13:06:52.537Z","comments":true,"path":"music/index.html","permalink":"https://sunhao-ai.github.io/music/index.html","excerpt":"","text":""},{"title":"标签","date":"2020-11-24T07:14:39.000Z","updated":"2021-07-26T14:44:42.337Z","comments":false,"path":"tags/index.html","permalink":"https://sunhao-ai.github.io/tags/index.html","excerpt":"","text":""},{"title":"友情链接","date":"2018-06-07T14:17:49.000Z","updated":"2021-07-27T07:31:10.990Z","comments":true,"path":"link/index.html","permalink":"https://sunhao-ai.github.io/link/index.html","excerpt":"","text":""},{"title":"相册","date":"2021-11-20T11:24:28.431Z","updated":"2021-08-14T10:54:08.719Z","comments":false,"path":"List/gallery/index.html","permalink":"https://sunhao-ai.github.io/List/gallery/index.html","excerpt":"","text":"壁纸 收藏的一些壁纸 OH MY GIRL 关于OH MY GIRL的图片"},{"title":"","date":"2019-08-10T08:41:10.000Z","updated":"2021-11-20T13:12:39.780Z","comments":false,"path":"List/movies/index.html","permalink":"https://sunhao-ai.github.io/List/movies/index.html","excerpt":"","text":"搞笑视频"},{"title":"Music-BBOX","date":"2020-04-23T04:58:56.000Z","updated":"2021-11-20T15:26:29.830Z","comments":false,"path":"List/music/index.html","permalink":"https://sunhao-ai.github.io/List/music/index.html","excerpt":"","text":""},{"title":"","date":"2020-11-24T08:05:01.000Z","updated":"2021-08-13T06:23:02.212Z","comments":false,"path":"List/gallery/ohmygirl/index.html","permalink":"https://sunhao-ai.github.io/List/gallery/ohmygirl/index.html","excerpt":"","text":""},{"title":"","date":"2021-11-20T11:24:28.432Z","updated":"2021-08-14T10:51:08.180Z","comments":false,"path":"List/gallery/wallpaper/index.html","permalink":"https://sunhao-ai.github.io/List/gallery/wallpaper/index.html","excerpt":"","text":""}],"posts":[{"title":"","slug":"MNIST手写数字识别_softmax","date":"2021-11-20T14:14:44.699Z","updated":"2021-11-20T14:14:36.354Z","comments":true,"path":"posts/0.html","link":"","permalink":"https://sunhao-ai.github.io/posts/0.html","excerpt":"","text":"先模拟一张图片输入：数据 X: 1 * N；W: N * L；Y: 1 * L 其中：1为输入1张图像；N为图像展开像素，即28*28=784；L为分类个数，即10种类别 X，MNIST 图像输入数据；W，权重；Y，one-hot $$\\begin{flalign*} X = \\begin{pmatrix} x_{1}, &amp; x_{2}, &amp; \\cdots ,&amp; x_{n}\\ \\end{pmatrix}_{1*N}\\text{ }&amp;&amp; \\end{flalign*}$$ W，权重 $$\\begin{flalign*} W = \\begin{pmatrix} w_{11}, &amp; w_{21}, &amp; \\cdots ,&amp; w_{nl}\\ w_{12}, &amp; w_{22}, &amp; \\cdots ,&amp; w_{nl}\\ \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\ w_{1n}, &amp; w_{2n}, &amp; \\cdots ,&amp; w_{nl}\\ \\end{pmatrix}_{N*L}\\text{ }&amp;&amp; \\end{flalign*}$$ Y，one-hot标签 $$\\begin{flalign*} Y = \\begin{pmatrix} y_{1}, &amp; y_{2}, &amp; \\cdots ,&amp; y_{n}\\ \\end{pmatrix}_{1*N}\\text{ }&amp;&amp; \\end{flalign*}$$ 第一步 f(X,W)=X@W +B$$\\begin{flalign}f(x,w) = X@W= \\begin{pmatrix} f_{1}, &amp; f_{2}, &amp; \\cdots &amp;, f_{l}\\ \\end{pmatrix}_{1*L} &amp;\\text{}&amp;&amp;\\end{flalign}$$ 第二步 防止过溢$$\\begin{flalign} \\begin{split} f &amp; = f - f_{max}=&gt; \\begin{pmatrix} f_{1}- f_{max},&amp; f_{2}- f_{max},&amp; \\cdots &amp;, f_{n}- f_{max}\\ \\end{pmatrix}{1*L}&amp; \\&amp;=&gt;eg: \\begin{pmatrix} 0 &amp;, -1.2, &amp; \\cdots &amp;, -5\\ \\end{pmatrix}{1*L} \\end{split}&amp;&amp; \\end{flalign}$$ 第三步 softmax$$\\begin{flalign}code中:S = \\sum_{j=1}^{L} \\frac{e^{f_{ij}}}{\\sum_{k=1}^{L}e^{f_{ik}}}{\\quad\\quad}分子是f一行里的一个元素做指数，分母f一行的元素和 &amp;\\text{}&amp;&amp;\\end{flalign}$$ 第四步 交叉熵损失$$\\begin{flalign}C=- \\sum_{j=1}^{L} (Y_{j}*lnS_{j}) &amp;\\text{}&amp;&amp;\\end{flalign}$$ 第五步 损失函数$$\\begin{flalign}loss = -C.sum()+\\frac{\\lambda}{2}*\\Vert W \\Vert_2^2= (\\sum_{j=1}^{L}(Y_{j}*lnS_{j})).sum()+ \\frac{\\lambda}{2}*\\Vert W \\Vert_2^2 &amp;\\text{}&amp;&amp;\\end{flalign}$$ 第六步 求导$$\\begin{flalign} \\begin{split} &amp; loss = C+\\frac{\\lambda}{2}\\Vert W \\Vert_2^2= -YlnS +\\frac{\\lambda}{2}\\Vert x \\Vert_2^2 \\&amp; C =-YlnS ;;;;;;;; f(x,w) = XW \\&amp; (1)\\frac{\\partial loss}{\\partial w}= \\frac{\\partial C}{\\partial w}+\\lambda W \\&amp; (2)\\frac{\\partial C}{\\partial w}= \\frac{\\partial C}{\\partial S} {\\color{red}\\frac{\\partial S}{\\partial f}}* \\frac{\\partial f}{\\partial w} \\&amp; (3)\\frac{\\partial C}{\\partial S}= \\frac{\\partial (-Y*lnS)}{\\partial S}=-\\frac{Y}{ S} ;;;;;;;;;;;;;;;;; \\frac{\\partial f}{\\partial W}=\\frac{\\partial (X@W)}{\\partial W}=X^T \\\\end{split}&amp;&amp; \\end{flalign}$$ 核心求导 $$\\begin{flalign} \\begin{split}&amp; f = \\begin{pmatrix} f_{1}, &amp; f_{2}, &amp; \\cdots ,&amp; f_{l}\\ \\end{pmatrix}{1L}\\&amp; S = \\begin{pmatrix} e^{f_1}, &amp; e^{f_2}, &amp; \\cdots ,&amp; e^{f_l} \\ \\end{pmatrix}_{1L} = \\begin{pmatrix} S{1}, &amp; S_{2}, &amp; \\cdots ,&amp; S_{l} \\ \\end{pmatrix}_{1*L}\\&amp;\\frac{\\partial S}{\\partial f}= ( \\frac{\\partial S_1}{\\partial f}, \\frac{\\partial S_2}{\\partial f},\\cdots, \\frac{\\partial S_l}{\\partial f} )\\ &amp;= ( {\\color{blue} (\\frac{\\partial S_1}{\\partial f_1}+ \\frac{\\partial S_1}{\\partial f_2}+\\cdots+ \\frac{\\partial S_1}{\\partial f_l})}, (\\frac{\\partial S_2}{\\partial f_1}+ \\frac{\\partial S_2}{\\partial f_2}+\\cdots+ \\frac{\\partial S_2}{\\partial f_l}), \\cdots, (\\frac{\\partial S_l}{\\partial f_1}+ \\frac{\\partial S_l}{\\partial f_2}+\\cdots+ \\frac{\\partial S_l}{\\partial f_l}) )\\&amp;令\\sum_{k=1}^{L}e^{f_{k}}={e^{f_{1}}+e^{f_{2}}+…+e^{f_{l}}}=h\\&amp; 以蓝色部分为例，\\frac{\\partial S_i}{\\partial f_j}可分为2种情况讨论:\\&amp; 1)当i=j时，\\frac{\\partial S_i}{\\partial f_j}= \\frac{\\partial S_i}{\\partial f_i}= \\frac{\\partial \\frac{e^{f_i}}{e^{f_1}+e^{f_2}+\\cdots+e^{f_l}}}{\\partial f_i}= \\frac{\\partial \\frac{e^{f_i}}{h}}{\\partial f_i}= \\frac{e^{f_i}*h-e^{f_i}\\frac{\\partial h}{\\partial f_i}}{h^2}\\&amp; 其中\\frac{\\partial h}{\\partial f_i}= \\frac{\\partial (e^{f_1}+e^{f_2}+…+e^{f_L})}{\\partial f_i} = e^{f_i},\\&amp;则\\frac{\\partial S_i}{\\partial f_i}= \\frac{e^{f_i}*h-e^{f_i} * \\frac{\\partial h}{\\partial f_i}}{h^2}= \\frac{e^{f_i}*h-e^{f_i} * e^{f_i}}{h^2}= S_i-{S_i}^2\\ &amp; 2)当i!=j时，\\frac{\\partial S_i}{\\partial f_j}= \\frac{\\partial \\frac{e^{f_i}}{e^{f_1}+e^{f_2}+\\cdots+e^{f_l}}}{\\partial f_j}= \\frac{\\partial \\frac{e^{f_i}}{h}}{\\partial f_j}= \\frac{-e^{f_i}*\\frac{\\partial h}{\\partial f_j}}{h^2}\\&amp; 其中\\frac{\\partial h}{\\partial f_j}= \\frac{\\partial (e^{f_1}+e^{f_2}+…+e^{f_L})}{\\partial f_j} = e^{f_j},\\&amp;则\\frac{\\partial S_i}{\\partial f_j}= \\frac{-e^{f_i}*\\frac{\\partial h}{\\partial f_j}}{h^2}= \\frac{-e^{f_i}*e^{f_i}}{h^2}= -S_i * S_j\\&amp; 那么令\\frac{\\partial S_i}{\\partial f}= \\frac{\\partial Si}{\\partial f_{1}}+ \\frac{\\partial Si}{\\partial f_{2}}+…+ \\frac{\\partial Si}{\\partial f_{l}}= \\sum_{j=1}^{L} \\frac{\\partial S_i}{\\partial f_j}= \\sum_{j=1}^{L} S_j(\\Delta_j-S_i)\\&amp; 其中,当i=j时=&gt;\\Delta_i=1，当i!=j时=&gt;\\Delta_i=0 \\end{split}&amp;&amp; \\end{flalign}$$ 代入公式得 $$\\begin{flalign} \\begin{split} &amp;\\frac{\\partial C}{\\partial w}= \\frac{\\partial C}{\\partial S}* {\\color{red}\\frac{\\partial S}{\\partial f}}* \\frac{\\partial f}{\\partial w}= -\\frac{Y}{ S}\\sum_{j=1}^{L} S_j(\\Delta_j-S_i) X^T\\&amp; =&gt;\\frac{\\partial C}{\\partial w}= [ {\\color{green} (-\\frac{Y}{S}\\sum_{j=1}^{L} S_j(\\Delta_j-S_1) *X^T )}, (-\\frac{Y}{S}*\\sum_{j=1}^{L} S_j(\\Delta_j-S_2) X^T ),\\cdots, (-\\frac{Y}{S}\\sum_{j=1}^{L} S_j(\\Delta_j-S_l) *X^T ) ]\\&amp;用绿色部分分析:-\\frac{Y}{S}*\\sum_{j=1}^{L} S_j(\\Delta_j-S_1) X^T = -\\sum_{j=1}^{L} \\frac{Y_j}{S_j}S_j(\\Delta_j-S_1)X^T= -\\sum_{j=1}^{L} Y_j(\\Delta_j-S_1)*X^T\\&amp;= -( \\sum_{j=1}^{L} Y_j * \\Delta_j - \\sum_{j=1}^{L} Y_j * S_1 )*X^T = -(Y_1-S_1)*X^T\\&amp; 归纳可得\\frac{\\partial C}{\\partial w}= [ -(Y_1-S_1)*X^T, -(Y_2-S_2)*X^T,\\cdots, -(Y_l-S_l)*X^T ]=\\ &amp; -[ (Y_1-S_1), (Y_2-S_2),\\cdots, (Y_l-S_l) ]*X^T= -(Y-S)*X^T=&gt;X^T_{N1} @ (S-Y)_{1*10}=X^T@(S-Y) \\end{split}&amp;&amp; \\end{flalign}$$ 合并可得 $$\\begin{flalign} \\begin{split} &amp; \\frac{\\partial loss}{\\partial w}= \\frac{\\partial C}{\\partial w}+\\lambda *W= X^T@(S-Y)+\\lambda *W \\end{split}&amp;&amp; \\end{flalign}$$ 同理可得多张图片输入$$\\begin{flalign*} X = \\begin{pmatrix} x_{11} &amp; x_{12} &amp; \\cdots &amp; x_{1n}\\ x_{21} &amp; x_{22} &amp; \\cdots &amp; x_{2n}\\ \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\ x_{m1} &amp; x_{m2} &amp; \\cdots &amp; x_{mn}\\ \\end{pmatrix}{M*N};;W= \\begin{pmatrix} w{11} &amp; w_{21} &amp; \\cdots &amp; w_{l1}\\ w_{12} &amp; w_{22} &amp; \\cdots &amp; w_{l2}\\ \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\ w_{1n} &amp; w_{2n} &amp; \\cdots &amp; w_{ln}\\ \\end{pmatrix}_{N*L} ;;Y= \\begin{pmatrix} y_{11} &amp; y_{12} &amp; \\cdots &amp; y_{1l}\\ y_{21} &amp; y_{22} &amp; \\cdots &amp; y_{2l}\\ \\vdots &amp; \\vdots &amp; \\ddots &amp; \\vdots\\ y_{mn} &amp; y_{m2} &amp; \\cdots &amp; y_{ml}\\ \\end{pmatrix}_{M*L}\\text{ }&amp;&amp; \\end{flalign*}$$ 导数公式一样，只是X，W，Y均为矩阵而不是向量了 $$\\begin{flalign} \\begin{split} &amp; \\frac{\\partial loss}{\\partial w}= \\frac{1}{M} * \\frac{\\partial C}{\\partial w}+\\lambda *W= \\frac{X^T@(S-Y)}{M} +\\lambda *W \\end{split}&amp;&amp; \\end{flalign}$$","categories":[],"tags":[]},{"title":"我的测试博客","slug":"我的测试博客","date":"2021-11-20T10:08:12.000Z","updated":"2021-11-20T11:35:01.369Z","comments":true,"path":"posts/ae1d00f.html","link":"","permalink":"https://sunhao-ai.github.io/posts/ae1d00f.html","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2021-11-20T10:06:46.882Z","updated":"2021-11-20T11:35:01.367Z","comments":true,"path":"posts/4a17b156.html","link":"","permalink":"https://sunhao-ai.github.io/posts/4a17b156.html","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new \"My New Post\" More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"Markdown快速入门小技巧(hexo博客文章--格式用法)","slug":"03-Markdown快速入门小技巧","date":"2021-06-21T08:00:00.000Z","updated":"2021-07-28T11:01:26.837Z","comments":true,"path":"posts/15546.html","link":"","permalink":"https://sunhao-ai.github.io/posts/15546.html","excerpt":"","text":"相遇皆是缘分 Markdown 的快速入门(后缀是 .md)快捷键ctrl+shift+1 大纲显示 ctrl+/ 源代码显示 代码块：​```java(html等等) 会自动提示 标题#标题1 （大） ##标题2 ###标题3 ####标题4 （小） 以此类推 最高标题6 加粗//加粗 **加粗** //代码高亮显示 ==高亮== //删除线 ~~删除线~~ //斜体 *斜体内容* 引用：//引用语法 &gt;作者：泽 &gt;&gt;作者：泽 &gt;&gt;&gt;作者：泽 作者：泽 作者：泽 作者：泽 分割线//分割线 --- *** 图片插入//在线图片与本地图片 ![照片名子]（/image/me.png） 超链接//超链接语法 [超链接名字]（https://gihub.com/yerenping） 我的天空 列表//无需列表 - 目录1 -后加空格 - 目录2 - 目录3 //有序列表 1+. +名称 表格右键》插入》表格 用代码过于复杂不推荐使用 姓名 数字 语文 小王 85 21","categories":[{"name":"hexo博客","slug":"hexo博客","permalink":"https://sunhao-ai.github.io/categories/hexo%E5%8D%9A%E5%AE%A2/"},{"name":"Markdown","slug":"hexo博客/Markdown","permalink":"https://sunhao-ai.github.io/categories/hexo%E5%8D%9A%E5%AE%A2/Markdown/"}],"tags":[{"name":"hexo博客","slug":"hexo博客","permalink":"https://sunhao-ai.github.io/tags/hexo%E5%8D%9A%E5%AE%A2/"},{"name":"Markdown","slug":"Markdown","permalink":"https://sunhao-ai.github.io/tags/Markdown/"}]}],"categories":[{"name":"hexo博客","slug":"hexo博客","permalink":"https://sunhao-ai.github.io/categories/hexo%E5%8D%9A%E5%AE%A2/"},{"name":"Markdown","slug":"hexo博客/Markdown","permalink":"https://sunhao-ai.github.io/categories/hexo%E5%8D%9A%E5%AE%A2/Markdown/"}],"tags":[{"name":"hexo博客","slug":"hexo博客","permalink":"https://sunhao-ai.github.io/tags/hexo%E5%8D%9A%E5%AE%A2/"},{"name":"Markdown","slug":"Markdown","permalink":"https://sunhao-ai.github.io/tags/Markdown/"}]}